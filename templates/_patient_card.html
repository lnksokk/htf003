<div class="card patient-card {% if patient.current_risk %}at-risk{% endif %}" id="patient-{{ patient.id }}">
    
    <div class="card-header d-flex justify-content-between align-items-center">
        <h5 class="mb-0">{{ patient.name }}</h5>
        <span class="badge {% if patient.current_risk %}bg-danger{% else %}bg-success{% endif %}">
            {% if patient.current_risk %}At Risk{% else %}Stable{% endif %}
        </span>
    </div>
    
    <div class="card-body">
        <div class="row mb-3">
            <div class="col-12">
                <small class="text-muted">Room</small>
                <p class="mb-0">{{ patient.room }}</p>
            </div>
        </div>
        
        {% if patient.latest_vitals %}
            <h6 class="border-bottom pb-2 mb-3">Latest Vitals <small class="text-muted">({{ patient.latest_vitals.timestamp|datetime('%H:%M') }})</small></h6>
            
            <div class="row">
                <div class="col-4">
                    <small class="text-muted">Heart Rate</small>
                    <p class="mb-0 {% if patient.latest_vitals.heart_rate and (patient.latest_vitals.heart_rate < 60 or patient.latest_vitals.heart_rate > 100) %}vital-warning{% else %}vital-normal{% endif %}">
                        {% if patient.latest_vitals.heart_rate %}{{ patient.latest_vitals.heart_rate|int }} bpm{% else %}--{% endif %}
                    </p>
                </div>
                <div class="col-4">
                    <small class="text-muted">SpO₂</small>
                    <p class="mb-0 {% if patient.latest_vitals.spo2 and patient.latest_vitals.spo2 < 95 %}vital-warning{% else %}vital-normal{% endif %}">
                        {% if patient.latest_vitals.spo2 %}{{ patient.latest_vitals.spo2|round(1) }}%{% else %}--{% endif %}
                    </p>
                </div>
                <div class="col-4">
                    <small class="text-muted">Temp</small>
                    <p class="mb-0 {% if patient.latest_vitals.temp and (patient.latest_vitals.temp < 36.5 or patient.latest_vitals.temp > 37.5) %}vital-warning{% else %}vital-normal{% endif %}">
                        {% if patient.latest_vitals.temp %}{{ patient.latest_vitals.temp|round(1) }}°C{% else %}--{% endif %}
                    </p>
                </div>
            </div>
            
            {% if patient.current_risk %}
                <div class="alert-banner mt-3">
                    <strong>⚠️ Warning:</strong> Patient has vital signs outside normal ranges.
                    <a href="/alerts" class="btn btn-sm btn-outline-dark mt-2">View Details</a>
                </div>
            {% endif %}
        {% else %}
            <div class="text-center text-muted py-3">
                <p>No vital signs recorded yet</p>
            </div>
        {% endif %}
    </div>
    
    <div class="card-footer text-muted text-center">
        Last updated: {{ patient.latest_vitals.timestamp|datetime if patient.latest_vitals else 'Never' }}
    </div>
</div> 